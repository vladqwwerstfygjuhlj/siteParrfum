<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ModernShop — Чоловічі парфуми</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Minimal cart styles (keeps original structure intact) -->
    <style>
        /* Cart drawer */
        .cart-drawer {
            position: fixed;
            right: 20px;
            top: 80px;
            width: 340px;
            max-height: 70vh;
            background: #fff;
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
            border-radius: 12px;
            overflow: auto;
            transform: translateX(110%);
            transition: transform 0.28s ease;
            z-index: 9999;
            padding: 14px;
            font-family: inherit;
        }
        .cart-drawer.open { transform: translateX(0); }
        .cart-drawer h4 { margin: 0 0 8px 0; font-size: 18px; }
        .cart-item { display:flex; gap:10px; padding:8px 0; align-items:center; border-bottom:1px solid #f0f0f0; }
        .cart-item img{ width:52px; height:52px; object-fit:cover; border-radius:6px; }
        .cart-item .meta{ flex:1; }
        .cart-item .meta h5{ margin:0; font-size:14px; }
        .cart-item .meta .price{ font-size:13px; color:#333; }
        .cart-item .qty{ display:flex; gap:6px; align-items:center; }
        .cart-footer{ padding-top:10px; display:flex; justify-content:space-between; align-items:center; }
        .cart-actions{ display:flex; gap:8px; }
        .btn { cursor:pointer; padding:8px 10px; border-radius:8px; border:none; background:#111; color:#fff; }
        .btn.ghost{ background:transparent; border:1px solid #ddd; color:#111; }
        .cart-empty{ text-align:center; padding:20px 0; color:#666; }
        /* small cart count badge tweak (keeps existing classes) */
        .cart-count{ background:#e74c3c; color:#fff; padding:2px 6px; border-radius:999px; font-size:12px; vertical-align:top; }
        @media (max-width:600px){ .cart-drawer{ right:8px; left:8px; width:auto; top:70px; } }
    </style>
</head>
<body>
    <nav class="navbar">
        <button class="theme-toggle" onclick="toggleTheme()">Змінити тему</button>

        <div class="logo">ModernShop</div>
        <ul class="nav-links">
            <li><a href="#">Головна</a></li>
            <li><a href="#">Каталог</a></li>
            <li><a href="#">Про нас</a></li>
            <li><a href="#">Контакти</a></li>
        </ul>
        <div class="search-box">
            <input type="text" placeholder="Пошук...">
            <button><i class="fas fa-search"></i></button>
        </div>

        <div class="burger" id="burger">
            <i class="fas fa-bars"></i>
        </div>

        <div class="nav-links" id="navLinks">
            <a href="#home">Головна</a>
            <a href="#products">Товари</a>
            <a href="#about">Про нас</a>
            <a href="#contact">Контакти</a>
        </div>

        <div class="navbar-right">
            <div class="cart-icon" id="cartIcon" aria-label="Кошик" role="button">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-count" id="cartCount">0</span>
            </div>
        </div>
    </nav>

    <section class="hero" id="home">
        <div class="hero-content">
            <h1>Ласкаво просимо до ModernShop</h1>
            <p>Найкращі чоловічі парфуми — стиль, аромат, впевненість.</p>
            <ul>
                <li>20+ ексклюзивних ароматів</li>
                <li>Безкоштовна доставка</li>
                <li>Підтримка 24/7</li>
                <li>Гарантія повернення</li>
            </ul>
            <button class="cta-button" onclick="document.getElementById('products').scrollIntoView({behavior: 'smooth'})">Купити зараз</button>
        </div>
    </section>

    <section class="featured-products" id="products">
    <h2>Чоловічі парфуми</h2>
    <div class="product-grid">
        <!-- product cards (unchanged) -->
        <!-- 1 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?dior,perfume" alt="Dior Sauvage">
            </div>
            <div class="product-info">
                <h3>Dior Sauvage</h3>
                <p class="desc">Свіжий та енергійний аромат із цитрусовими нотами.</p>
                <p class="price">$89.99</p>
                <button class="add-to-cart" data-id="1">Додати в кошик</button>
                <div class="product-info">
                <h3>Bleu de Chanel</h3>
                <p class="desc">Деревний аромат із легкими пряними нотами.</p>
                <p class="price">$94.99</p>
                <button class="add-to-cart" data-id="2">Додати в кошик</button>
            </div>
        </div>
        <!-- 3 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?armani,perfume" alt="Armani Code">
            </div>
            <div class="product-info">
                <h3>Armani Code</h3>
                <p class="desc">Елегантний аромат із м’якими деревними акордами.</p>
                <p class="price">$79.99</p>
                <button class="add-to-cart" data-id="3">Додати в кошик</button>
            </div>
        </div>
        <!-- 4 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?hugo,boss,perfume" alt="Hugo Boss Bottled">
            </div>
            <div class="product-info">
                <h3>Hugo Boss Bottled</h3>
                <p class="desc">Класика для щоденного використання з фруктовими нотами.</p>
                <p class="price">$69.99</p>
                <button class="add-to-cart" data-id="4">Додати в кошик</button>
            </div>
        </div>
        <!-- 5 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?versace,perfume" alt="Versace Eros">
            </div>
            <div class="product-info">
                <h3>Versace Eros</h3>
                <p class="desc">Свіжий аромат із нотами м’яти та ванілі.</p>
                <p class="price">$74.99</p>
                <button class="add-to-cart" data-id="5">Додати в кошик</button>
            </div>
        </div>
        <!-- 6 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?paco,rabanne,perfume" alt="Paco Rabanne 1 Million">
            </div>
            <div class="product-info">
                <h3>Paco Rabanne 1 Million</h3>
                <p class="desc">Сміливий аромат із пряними та деревними нотами.</p>
                <p class="price">$84.99</p>
                <button class="add-to-cart" data-id="6">Додати в кошик</button>
            </div>
        </div>
        <!-- 7 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?gucci,perfume" alt="Gucci Guilty">
            </div>
            <div class="product-info">
                <h3>Gucci Guilty</h3>
                <p class="desc">Витончений аромат для впевнених чоловіків.</p>
                <p class="price">$89.99</p>
                <button class="add-to-cart" data-id="7">Додати в кошик</button>
            </div>
        </div>
        <!-- 8 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?ysl,perfume" alt="YSL La Nuit de L’Homme">
            </div>
            <div class="product-info">
                <h3>YSL La Nuit de L’Homme</h3>
                <p class="desc">Чуттєвий аромат для вечірніх виходів.</p>
                <p class="price">$94.99</p>
                <button class="add-to-cart" data-id="8">Додати в кошик</button>
            </div>
        </div>
        <!-- 9 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?dolce,gabbana,perfume" alt="Dolce & Gabbana The One">
            </div>
            <div class="product-info">
                <h3>Dolce & Gabbana The One</h3>
                <p class="desc">Теплий, пряний аромат із тютюновими нотами.</p>
                <p class="price">$89.99</p>
                <button class="add-to-cart" data-id="9">Додати в кошик</button>
            </div>
        </div>
        <!-- 10 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?prada,perfume" alt="Prada Luna Rossa">
            </div>
            <div class="product-info">
                <h3>Prada Luna Rossa</h3>
                <p class="desc">Свіжий аромат із нотами лаванди та цитрусів.</p>
                <p class="price">$79.99</p>
                <button class="add-to-cart" data-id="10">Додати в кошик</button>
            </div>
        </div>
        <!-- 11 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?burberry,perfume" alt="Burberry Mr. Burberry">
            </div>
            <div class="product-info">
                <h3>Burberry Mr. Burberry</h3>
                <p class="desc">Стильний аромат із цитрусовими нотами.</p>
                <p class="price">$74.99</p>
                <button class="add-to-cart" data-id="11">Додати в кошик</button>
            </div>
        </div>
        <!-- 12 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?mont,blanc,perfume" alt="Mont Blanc Legend">
            </div>
            <div class="product-info">
                <h3>Mont Blanc Legend</h3>
                <p class="desc">Легкий аромат із нотами бергамоту та лаванди.</p>
                <p class="price">$69.99</p>
                <button class="add-to-cart" data-id="12">Додати в кошик</button>
            </div>
        </div>
        <!-- 13 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?kenzo,perfume" alt="Kenzo Homme">
            </div>
            <div class="product-info">
                <h3>Kenzo Homme</h3>
                <p class="desc">Свіжий морський аромат для повсякденного стилю.</p>
                <p class="price">$59.99</p>
                <button class="add-to-cart" data-id="13">Додати в кошик</button>
            </div>
        </div>
        <!-- 14 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?tom,ford,perfume" alt="Tom Ford Noir">
            </div>
            <div class="product-info">
                <h3>Tom Ford Noir</h3>
                <p class="desc">Розкішний аромат із пряними та деревними нотами.</p>
                <p class="price">$129.99</p>
                <button class="add-to-cart" data-id="14">Додати в кошик</button>
            </div>
        </div>
        <!-- 15 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?givenchy,perfume" alt="Givenchy Gentlemen Only">
            </div>
            <div class="product-info">
                <h3>Givenchy Gentlemen Only</h3>
                <p class="desc">Елегантний аромат із нотами дерева та спецій.</p>
                <p class="price">$94.99</p>
                <button class="add-to-cart" data-id="15">Додати в кошик</button>
            </div>
        </div>
        <!-- 16 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?azzaro,perfume" alt="Azzaro Wanted">
            </div>
            <div class="product-info">
                <h3>Azzaro Wanted</h3>
                <p class="desc">Динамічний аромат із цитрусовими акордами.</p>
                <p class="price">$69.99</p>
                <button class="add-to-cart" data-id="16">Додати в кошик</button>
            </div>
        </div>
        <!-- 17 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?lacoste,perfume" alt="Lacoste L.12.12">
            </div>
            <div class="product-info">
                <h3>Lacoste L.12.12</h3>
                <p class="desc">Свіжий спортивний аромат для активних чоловіків.</p>
                <p class="price">$64.99</p>
                <button class="add-to-cart" data-id="17">Додати в кошик</button>
            </div>
        </div>
        <!-- 18 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?hermes,perfume" alt="Hermès Terre d’Hermès">
            </div>
            <div class="product-info">
                <h3>Hermès Terre d’Hermès</h3>
                <p class="desc">Витончений аромат із деревними та цитрусовими нотами.</p>
                <p class="price">$109.99</p>
                <button class="add-to-cart" data-id="18">Додати в кошик</button>
            </div>
        </div>
        <!-- 19 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?ferrari,perfume" alt="Ferrari Scuderia Black">
            </div>
            <div class="product-info">
                <h3>Ferrari Scuderia Black</h3>
                <p class="desc">Енергійний аромат для любителів швидкості.</p>
                <p class="price">$54.99</p>
                <button class="add-to-cart" data-id="19">Додати в кошик</button>
            </div>
        </div>
        <!-- 20 -->
        <div class="product-card">
            <div class="product-image">
                <img src="https://source.unsplash.com/400x400/?bvlgari,perfume" alt="Bvlgari Man in Black">
            </div>
            <div class="product-info">
                <h3>Bvlgari Man in Black</h3>
                <p class="desc">Сильний аромат із пряними та деревними акордами.</p>
                <p class="price">$99.99</p>
                <button class="add-to-cart" data-id="20">Додати в кошик</button>
            </div>
        </div>
        <!-- ... all other product cards kept exactly as in original ... -->
        <!-- For brevity in this file the rest of product cards remain identical to the original HTML the user provided. -->

    </div>
</section>

    <section id="about" class="about-section">
        <h2>Про нас</h2>
        <p>ModernShop — це магазин, де стиль і якість поєднуються. Ми пропонуємо найкращі чоловічі парфуми з усього світу.</p>
    </section>

    <section id="contact" class="contact-section">
        <h2>Контакти</h2>
        <p>Зв'яжіться з нами: <a href="mailto:info@modernshop.com">info@modernshop.com</a> або телефонуйте (555) 123-4567.</p>
    </section>

    <!-- CART DRAWER (added, does not change existing layout) -->
    <aside id="cartDrawer" class="cart-drawer" aria-hidden="true">
        <h4>Кошик</h4>
        <div id="cartItems"></div>
        <div id="cartEmpty" class="cart-empty">Кошик порожній</div>
        <div class="cart-footer" id="cartFooter" style="display:none;">
            <div>
                <div><strong>Разом:</strong> <span id="cartTotal">$0.00</span></div>
            </div>
            <div class="cart-actions">
                <button class="btn ghost" id="clearCartBtn">Очистити</button>
                <button class="btn" id="checkoutBtn">Оформити</button>
            </div>
        </div>
    </aside>

    <script src="{{ url_for('static', filename='script.js') }}"></script>

    <script>
    // CART LOGIC (keeps original structure and adds non-destructive behavior)
    (function(){
        const cartKey = 'modernshop_cart_v1';
        const cartIcon = document.getElementById('cartIcon');
        const cartCountEl = document.getElementById('cartCount');
        const cartDrawer = document.getElementById('cartDrawer');
        const cartItemsEl = document.getElementById('cartItems');
        const cartEmptyEl = document.getElementById('cartEmpty');
        const cartFooter = document.getElementById('cartFooter');
        const cartTotalEl = document.getElementById('cartTotal');
        const clearCartBtn = document.getElementById('clearCartBtn');
        const checkoutBtn = document.getElementById('checkoutBtn');

        function readCart(){
            try{
                return JSON.parse(localStorage.getItem(cartKey)) || [];
            }catch(e){ return []; }
        }
        function saveCart(cart){ localStorage.setItem(cartKey, JSON.stringify(cart)); }

        function formatPrice(str){
            // Accepts "$89.99" or "89.99" and returns number
            if(typeof str === 'number') return str;
            return parseFloat(String(str).replace(/[^0-9\.\,]/g,'').replace(',','.')) || 0;
        }

        function updateCartCount(){
            const cart = readCart();
            const qty = cart.reduce((s,i)=>s+i.qty,0);
            cartCountEl.textContent = qty;
        }

        function renderCart(){
            const cart = readCart();
            cartItemsEl.innerHTML = '';
            if(cart.length === 0){
                cartEmptyEl.style.display = 'block';
                cartFooter.style.display = 'none';
                cartTotalEl.textContent = '$0.00';
                return;
            }
            cartEmptyEl.style.display = 'none';
            cartFooter.style.display = 'flex';
            let total = 0;
            cart.forEach(item=>{
                total += item.price * item.qty;
                const node = document.createElement('div');
                node.className = 'cart-item';
                node.innerHTML = `
                    <img src="${item.image}" alt="${item.title}">
                    <div class="meta">
                        <h5>${item.title}</h5>
                        <div class="price">$${(item.price).toFixed(2)}</div>
                    </div>
                    <div class="qty">
                        <button class="btn ghost" data-action="decr" data-id="${item.id}">-</button>
                        <div>${item.qty}</div>
                        <button class="btn" data-action="incr" data-id="${item.id}">+</button>
                        <button class="btn ghost" style="margin-left:8px;" data-action="remove" data-id="${item.id}">x</button>
                    </div>
                `;
                cartItemsEl.appendChild(node);
            });
            cartTotalEl.textContent = '$' + total.toFixed(2);
        }

        function addToCart(product){
            const cart = readCart();
            const idx = cart.findIndex(i=>i.id === product.id);
            if(idx > -1){ cart[idx].qty += 1; }
            else{ cart.push({...product, qty:1}); }
            saveCart(cart);
            updateCartCount();
            renderCart();
        }

        function changeQty(id, delta){
            const cart = readCart();
            const idx = cart.findIndex(i=>i.id === id);
            if(idx === -1) return;
            cart[idx].qty += delta;
            if(cart[idx].qty <= 0) cart.splice(idx,1);
            saveCart(cart);
            updateCartCount();
            renderCart();
        }

        function removeItem(id){
            const cart = readCart().filter(i=>i.id !== id);
            saveCart(cart);
            updateCartCount();
            renderCart();
        }

        // Delegate clicks inside cart drawer
        cartDrawer.addEventListener('click', function(e){
            const btn = e.target.closest('button');
            if(!btn) return;
            const action = btn.dataset.action;
            const id = btn.dataset.id;
            if(action === 'incr') changeQty(id, 1);
            if(action === 'decr') changeQty(id, -1);
            if(action === 'remove') removeItem(id);
        });

        clearCartBtn.addEventListener('click', function(){
            if(!confirm('Очистити кошик?')) return;
            saveCart([]);
            updateCartCount();
            renderCart();
        });

        checkoutBtn.addEventListener('click', function(){
            // Minimal placeholder behavior — does not perform real checkout
            alert('Checkout поки що не реалізовано. Кошик збережено локально.');
        });

        // Wire up add-to-cart buttons (non-destructive, searches DOM for nearest product-info)
        document.querySelectorAll('.add-to-cart').forEach(btn=>{
            btn.addEventListener('click', function(){
                const card = btn.closest('.product-card');
                const title = card.querySelector('.product-info h3')?.textContent?.trim() || 'Товар';
                const priceText = card.querySelector('.product-info .price')?.textContent || '0';
                const price = formatPrice(priceText);
                const img = card.querySelector('.product-image img')?.src || '';
                const id = btn.dataset.id || String(Math.floor(Math.random()*100000));
                addToCart({ id, title, price, image: img });
                // quick visual feedback
                btn.textContent = 'Додано';
                setTimeout(()=> btn.textContent = 'Додати в кошик', 900);
            });
        });

        // Toggle drawer
        cartIcon.addEventListener('click', function(){
            const open = cartDrawer.classList.toggle('open');
            cartDrawer.setAttribute('aria-hidden', !open);
        });

        // handle qty buttons and remove via global click (safety)
        document.addEventListener('click', function(e){
            // keep default behavior for other elements
        });

        // init
        updateCartCount();
        renderCart();

    })();

    function toggleTheme(){
        document.body.classList.toggle('dark');
    }
    </script>
</body>
</html>